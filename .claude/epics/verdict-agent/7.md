---
name: Artifact Generator
status: closed
created: 2025-12-22T03:28:32Z
updated: 2025-12-23T03:09:03Z
github: https://github.com/1psychoQAQ/verdict-agent/issues/7
depends_on: [6]
parallel: false
conflicts_with: []
---

# Task: Artifact Generator

## Description

Implement artifact generation that transforms pipeline output into decision.json and todo.md files. Ensure artifacts are complete and properly formatted.

## Acceptance Criteria

- [ ] Generate decision.json with full verdict data
- [ ] Generate todo.md with execution plan in markdown
- [ ] UUID generation for artifact IDs
- [ ] Timestamp inclusion (ISO 8601)
- [ ] Atomic generation (both files or neither)
- [ ] Templates for consistent formatting

## Technical Details

### decision.json Format
```json
{
  "id": "uuid",
  "created_at": "2025-12-22T03:28:32Z",
  "input": "original user input",
  "verdict": {
    "ruling": "the chosen option",
    "rationale": "why this was chosen",
    "rejected": [
      {"option": "name", "reason": "why rejected"}
    ],
    "ranking": [1, 2, 3]
  },
  "is_final": true
}
```

### todo.md Template
```markdown
# Execution Plan: {ruling}

Generated: {timestamp}
Decision ID: {uuid}

## MVP Scope
- {scope item 1}
- {scope item 2}

## Phases

### Phase 1: {name}
- [ ] {task 1}
- [ ] {task 2}

## Done Criteria
- {criterion 1}
- {criterion 2}
```

### File Location
```
internal/artifact/decision.go
internal/artifact/todo.go
internal/artifact/generator.go
```

### Generator Interface
```go
type Generator struct{}

type Artifacts struct {
    DecisionJSON []byte
    TodoMD       []byte
    ID           uuid.UUID
    CreatedAt    time.Time
}

func (g *Generator) Generate(result *PipelineResult) (*Artifacts, error)
```

## Dependencies

- [ ] Task 005 (Pipeline) - provides PipelineResult

## Effort Estimate

- Size: S
- Hours: 3-4
- Parallel: false

## Definition of Done

- [ ] decision.json validates against JSON schema
- [ ] todo.md is valid markdown with checkboxes
- [ ] UUIDs are properly generated
- [ ] Timestamps are correct ISO 8601
- [ ] Unit tests verify output format
