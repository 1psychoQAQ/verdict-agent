---
name: Agent A (Verdict)
status: closed
created: 2025-12-22T03:28:32Z
updated: 2025-12-22T03:32:46Z
github: https://github.com/1psychoQAQ/verdict-agent/issues/4
depends_on: [3]
parallel: true
conflicts_with: []
---

# Task: Agent A (Verdict)

## Description

Implement Agent A, the Verdict Agent, which takes fuzzy user input and produces a singular ruling with explicit rejections. The agent must never suggest alternatives—only deliver definitive verdicts.

## Acceptance Criteria

- [ ] VerdictAgent struct with `Process(input string) (*VerdictOutput, error)`
- [ ] System prompt engineered for decisive, non-negotiable rulings
- [ ] Output JSON schema: ruling, rationale, rejected options, ranking
- [ ] Input validation (max 10,000 characters)
- [ ] Bilingual support (Chinese/English based on input language)
- [ ] No "also consider" or hedging language in output

## Technical Details

### Output Schema
```go
type VerdictOutput struct {
    Ruling    string           `json:"ruling"`
    Rationale string           `json:"rationale"`
    Rejected  []RejectedOption `json:"rejected"`
    Ranking   []int            `json:"ranking,omitempty"`
}

type RejectedOption struct {
    Option string `json:"option"`
    Reason string `json:"reason"`
}
```

### System Prompt Key Elements
1. "You are a judge, not a consultant"
2. "Deliver ONE ruling—no alternatives"
3. "Explicitly reject other options with reasons"
4. "Never use phrases like 'you could also' or 'it depends'"
5. "Output ONLY valid JSON matching the schema"

### File Location
`internal/agent/verdict.go`

### Prompt Testing
- Test with ambiguous inputs to verify single ruling
- Test with technical decisions (REST vs GraphQL)
- Test with project prioritization scenarios
- Verify Chinese input produces Chinese output

## Dependencies

- [ ] Task 002 (LLM Client) - for calling LLM

## Effort Estimate

- Size: L
- Hours: 6-8
- Parallel: true (can run alongside Task 004)

## Definition of Done

- [ ] VerdictAgent processes test inputs successfully
- [ ] Output always contains exactly one ruling
- [ ] Rejected options list is non-empty for multi-option inputs
- [ ] JSON output validates against schema
- [ ] Unit tests with mocked LLM responses
- [ ] Prompt produces consistent, decisive outputs
